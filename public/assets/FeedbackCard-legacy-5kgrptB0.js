System.register(["./index-legacy-DILYRPU9.js","./index-legacy-Dx5P1aGd.js"],function(e,i){"use strict";var t,s,l,n,r,a,d,o,c,x,h,u,p,g,j,m,v,y,f,b,w;return{setters:[e=>{t=e.r,s=e.j,l=e.p,n=e.q,r=e.h,a=e.s,d=e.t,o=e.v,c=e.w,x=e.x,h=e.y,u=e.z,p=e.g,g=e.A,j=e.B,m=e.C,v=e.D,y=e.E},e=>{f=e.a,b=e.b,w=e.e}],execute:function(){const i=[{value:"bug",label:"Bug反馈",description:"Bug 反馈"},{value:"feature",label:"新功能",description:"希望新增什么功能"},{value:"suggestion",label:"建议",description:"对产品的建议便于改良"}];e("F",({onSubmit:e})=>{const[v,y]=t.useState("bug"),[R,k]=t.useState(""),[C,S]=t.useState([]),[B,z]=t.useState(!1),[I,F]=t.useState(!1),[L,T]=t.useState(""),U=v&&R.trim()&&!B;return s.jsxs("div",{className:"feedback-form",children:[s.jsx(l,{children:s.jsxs(n,{children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[s.jsx(r,{children:s.jsx("strong",{children:"反馈类型"})}),s.jsx(a,{style:{width:"auto"},interface:"action-sheet",placeholder:"请选择反馈类型",value:v,onIonChange:e=>y(e.detail.value),children:i.map(e=>s.jsx(d,{value:e.value,children:e.label},e.value))})]}),s.jsxs("div",{style:{marginBottom:"10px"},children:[s.jsx(r,{children:s.jsxs("strong",{children:["图片 (",C.length,"/5)"]})}),s.jsx(o,{style:{marginTop:"6px"},children:s.jsxs(c,{children:[C.map((e,i)=>s.jsx(x,{size:"4",children:s.jsxs("div",{style:{position:"relative"},children:[s.jsx(h,{src:URL.createObjectURL(e),alt:`图片 ${i+1}`,style:{width:"100%",height:"100px",objectFit:"cover",borderRadius:"8px"}}),s.jsx(u,{fill:"clear",size:"small",style:{position:"absolute",top:"4px",right:"4px","--border-radius":"50%","--background":"rgba(0,0,0,0.6)",width:"32px",height:"32px"},onClick:()=>(e=>{S(i=>i.filter((i,t)=>t!==e))})(i),children:s.jsx(p,{icon:f,style:{color:"white"}})})]})},i)),C.length<5&&s.jsx(x,{size:"4",children:s.jsx("div",{onClick:()=>{var e;return null===(e=document.getElementById("image-upload"))||void 0===e?void 0:e.click()},style:{width:"100%",height:"100px",border:"2px dashed #ccc",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",backgroundColor:"#f8f9fa"},children:s.jsx(p,{icon:b,style:{fontSize:"32px",color:"#999"}})})})]})})]}),s.jsxs("div",{style:{marginTop:"10px"},children:[s.jsx(r,{children:s.jsx("strong",{children:"反馈内容"})}),s.jsx(g,{placeholder:"请输入反馈内容",value:R,onIonInput:e=>k(e.detail.value),rows:3,maxlength:500,counter:!0,fill:"outline"})]}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{const i=e.target.files;if(i){if(C.length+i.length>5)return T("图片最多5张"),void F(!0);Array.from(i).forEach(e=>{if(e.size>5242880)return T("图片大小不能超过5MB"),void F(!0);const i=new FileReader;i.onload=()=>{S(i=>[...i,e])},i.readAsDataURL(e)}),e.target.value=""}},style:{display:"none"},id:"image-upload",disabled:C.length>=5}),s.jsx("div",{style:{marginTop:"5px"},children:s.jsx(u,{expand:"block",onClick:async()=>{if(!R.trim())return T("请输入反馈内容"),void F(!0);z(!0);try{await e(R.trim(),v,C),T("反馈成功"),F(!0),y("bug"),k(""),S([])}catch(i){T("反馈失败"),F(!0)}finally{z(!1)}},disabled:!U||B,fill:B?"outline":"solid",children:B?s.jsx(j,{type:"indeterminate",style:{marginRight:"8px"}}):s.jsxs(s.Fragment,{children:[s.jsx(p,{icon:w,slot:"start"}),"提交"]})})})]})}),s.jsx(m,{isOpen:I,onDidDismiss:()=>F(!1),message:L,duration:3e3,position:"top"})]})}),e("a",({type:e,description:t,images:r})=>{return s.jsx("div",{className:"feedback-form",children:s.jsxs(l,{color:"warning",children:[s.jsx(v,{children:s.jsx(y,{children:(a=e,(null===(d=i.find(e=>e.value===a))||void 0===d?void 0:d.label)||a)})}),s.jsxs(n,{children:[r&&r.length>0&&s.jsx("div",{style:{marginBottom:"10px"},children:s.jsx(o,{style:{marginTop:"6px"},children:s.jsx(c,{children:r.map((e,i)=>s.jsx(x,{size:"4",children:s.jsx("div",{style:{position:"relative"},children:s.jsx(h,{src:URL.createObjectURL(e),alt:`图片 ${i+1}`,style:{width:"100%",height:"100px",objectFit:"cover",borderRadius:"8px"}})})},i))})})}),s.jsx("div",{style:{marginTop:"10px"},children:t})]})]})});var a,d})}}});
